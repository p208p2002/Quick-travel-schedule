# 排程模式

## 使用API
- Google Maps Distance Matrix API
- Google Place API
- Google DirectionsService

# 自動排程
## 方法
- 先驗證 **表二** 之時間是否合理，不合理則跳出警告
- 將獲取的開始地點與結束地點分別規劃為起點與終點
- 將一天分為上午(0800-1159)、下午(1200-1759)、晚上(1800-2200)三區來規畫行程
- 每個區的開始為餐點(透過Place API搜尋目前位置附近餐廳評分前10高之餐廳，透過加權方式隨機抽取)
- 如果該區已包含吃則忽略上條規則
- 計算區剩餘空閒時間，以經緯度換算距離抽取出資料庫附近點，再以 **停留時間+交通時間找到<空閒時間** 找到符合條件之點，隨機抽取排入，如果 **剩餘空閒時間<30分鐘** 則停止(或是達到尋找次數限制)
- 使用Google DirectionsService排定路線順序，然後列出

## 注意
- 起點開始應該以吃
- 如果是早上要額外計算住宿點與吃之資訊，在以吃為起點計算旅程
- 晚上區段時間以**表一**返回入住時間為準，若未設定預設2200

# 推薦排程
- 每次推薦三個地點
- 推薦依據自身目前所在位置向外搜尋半徑x公尺之地點(依距離、評分，加權抽取)
- 將一天分為上午(0800-1159)、下午(1200-1759)、晚上(1800-2200)三區來規畫行程
- 每個區的開始為餐點(透過Place API搜尋目前位置附近餐廳評分前10高之餐廳，透過加權方式隨機抽取)
- 如果該區已包含吃則忽略上條規則
- 計算區段剩餘空閒時間 **所有地點停留時間+所有地點之交通時間找到=該區段剩餘時間** 如果區段剩餘時間不足30分鐘則開始規畫下一區段
- 如所有區段均已規劃完畢，列出最終行程

## 注意
- 起點開始應該以吃
- 如果是早上要額外計算住宿點與吃之資訊，在以吃為起點計算旅程
- 晚上區段時間以 **表一** 返回入住時間為準，若未設定預設2200
- **推薦行程的時候要考量到使用者客製化地點需求**
- 有關於客製化地點:由於會得知第幾天哪個時段想去哪邊，應該在該天該時段的起始加入指定地點，然後即可依據指定地點附近搜尋下一個地點
